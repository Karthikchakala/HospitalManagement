% Chapter Template

\chapter{Admin Analytics and Reporting} % Main chapter title

\label{Chapter5} % Change X to a consecutive number; for referencing this chapter elsewhere, use \ref{Chapter5}

\lhead{Chapter 5. \emph{Admin Analytics and Reporting}} % Change X to a consecutive number; this is for the header on each page - perhaps a shortened title

%----------------------------------------------------------------------------------------
%	SECTION 1
%----------------------------------------------------------------------------------------

\section{Admin Analytics Overview}

Admin analytics and reporting: The HMS provides an analytics dashboard for administrators to monitor revenue, patient visits, and staff performance. Views include revenue by department and service category, visit volumes by department and doctor, and staff productivity by role. Filters support daily, weekly, monthly, yearly, and custom ranges to enable trend analysis and operational decision-making.

%-----------------------------------
%	SUBSECTION 1
%-----------------------------------
\subsection{Frontend Analytics UI}
Frontend analytics UI: Implemented in Next.js with Recharts. The dashboard uses tabs to switch between Revenue, Departments, Doctors, and Staff. Reusable components—`DateFilter`, `ChartCard`, and `StatCard`—ensure consistent presentation and responsive layouts. Data is fetched via Axios from \texttt{NEXT\_PUBLIC\_BACKEND\_BASE\_URL}, with loading states and error fallbacks for reliability.

%-----------------------------------
%	SUBSECTION 2
%-----------------------------------

\subsection{Backend Analytics Services}
Backend analytics services: Express routes under `/api/admin/analytics/*` aggregate revenue from `Billing`, visit counts from `Appointments` and `VirtualAppointments`, and staff metrics from operational tables. Date filters are passed as `from`/`to` and applied in Supabase queries. Service classification tags include Virtual Consultation and Inpatient where applicable. Results are grouped by department, doctor, and role for chart-ready responses.

%----------------------------------------------------------------------------------------
%	SECTION 2
%----------------------------------------------------------------------------------------

\section{Security and Performance}

Security and performance: Admin endpoints are protected with JWT and role checks, restricting access to administrators. Queries are shaped to minimize payloads and leverage database filtering and grouping. Responses support pagination where necessary, and errors return actionable messages. Future optimizations include caching frequently requested ranges and pre-aggregations for monthly reports.